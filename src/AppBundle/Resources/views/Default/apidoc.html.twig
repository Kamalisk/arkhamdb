{% extends 'AppBundle::layout.html.twig' %}

{% block title %}API Documentation{% endblock %}

{% block body %}
<div class="main white container">

<h1>{{ block('title') }}</h1>

<p><tt>http://thronesdb.com</tt> can be queried via an http API.</p>
<p>This API is provided for use in deckbuilders, card databases, tournament managers, and other tools that are a complement to playing A Game of Thrones: The Card Game Second Edition.</p>
<p>Do not use it for any project that allows for playing A Game of Thrones: The Card Game Second Edition online. FFG do not permit this. Additionally, any such project will be shut down by FFG, so probably do not attempt to make it at all.<p>
<p>All texts are copyrighted by Fantasy Flight Games.</p>

<h3>All Sets</h3>

<tt>/api/sets/</tt> returns data about all the sets in the database.

<h3>All Cards</h3>

<tt>/api/cards/</tt> returns data about all the cards in the database.

<h3>One Set</h3>

<tt>/api/set/{code}</tt> returns card data about the cards in the set identified by <tt>code</tt> (core for Core Set, etc).

<h3>One Card</h3>

<tt>/api/card/{code}</tt> returns card data about the card identified by <tt>code</tt> (01001 for A Clash of Kings, etc).

<h3>jsonp</h3>

Optional GET parameter "jsonp" for script tags.

<h3>Examples</h3>

<a href="/api/card/01001">/api/card/01001</a> returns data for A Clash of Kings<br>
<a href="/api/sets/?jsonp=parseSets">/api/sets/?jsonp=parseSets</a> returns data for all sets wrapped in a call to parseSets()<br>

<h3>Encoding</h3>

The response is in ascii encoding. Non-ascii characters are encoded with \uXXXX with XXXX their hexadecimal unicode value.<br>

<h3>Caching</h3>

<ul>
<li>Card data include a "last-modified" key giving the timestamp of the data (CET)</li>
<li><tt>/api/cards/</tt>, <tt>/api/card/</tt> and <tt>/api/set/</tt> responses use both HTTP cache expiration (max-age) and cache validation (last-modified). <b>Please use both when building your queries</b>.</li>
</ul>

<h3>CORS</h3>

<ul>
<li>All API responses expect for OAuth2 endpoints include a CORS header: <tt>Access-Control-Allow-Origin:*</tt></li>
</ul>

</div>
{% endblock %}
